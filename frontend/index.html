<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Página web de blog de café" />
  <title>BlogDeCafé</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

  <!-- Prefetch -->
  <link rel="Prefetch" href="#" as="DOCTYPE" />

  <!-- Preload -->
  <link rel="Preload" href="css/normalize.css" as="style" />
  <link rel="stylesheet" href="css/normalize.css" />

  <link rel="Preload" href="https://fonts.googleapis.com/css2?family=Open+Sans&family=PT+Sans:wght@400;700&display=swap"
    as="fonts" crossorigin="crossorigin" />
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans&family=PT+Sans:wght@400;700&display=swap"
    rel="stylesheet" />

  <link rel="Preload" href="css/style.css" as="style" />
  <link rel="stylesheet" href="css/style.css" />
</head>

<body>
  <header class="header">
    <div class="contenedor">
      <div class="barra">
        <a href="index.html" class="logo">
          <h1 class="logo__nombre no-margin centrar-texto">
            Blog<span class="logo__bold">DeCafé</span>
          </h1>
        </a>

        <nav class="navegacion">
          <a href="#" class="navegacion__enlace">Nosotros</a>
          <a href="#" class="navegacion__enlace">Cursos</a>
          <a href="#" class="navegacion__enlace">Contacto</a>
        </nav>
      </div>
    </div>

    <div class="header__texto">
      <h2 class="no-margin">Blog de café con consejos y cursos</h2>
      <p class="no-margin">
        Visitas a la página web: <span id="contador"></span>
      </p>
    </div>
  </header>

  <div class="contenedor contenido-principal">
    <main class="blog">
      <h3>Nuestro Blog</h3>

      <article class="entrada">
        <div class="entrada__imagen">
          <picture>
            <source loading="lazy" srcset="img/blog1.webp" type="image/webp" />
            <img loading="lazy" src="img/blog1.jpg" alt="imagen blog" />
          </picture>
        </div>

        <div class="entrada__contenido">
          <h4 class="no-margin">Tipos de Grano de Café</h4>
          <p>
            Lorem ipsum dolor sit amet consectetur adipisicing elit. Nemo
            assumenda placeat eius, explicabo id voluptates quaerat iure amet
            laudantium autem porro expedita a, consequuntur commodi sit
            aperiam in. Maiores, ea!
          </p>
          <a href="#" class="boton boton--primario">Leer Entrada</a>
        </div>
      </article>

      <article class="entrada">
        <div class="entrada__imagen">
          <picture>
            <source loading="lazy" srcset="img/blog2.webp" type="image/webp" />
            <img loading="lazy" src="img/blog2.jpg" alt="imagen blog" />
          </picture>
        </div>

        <div class="entrada__contenido">
          <h4 class="no-margin">3 Deliciosas Recetas de Café</h4>
          <p>
            Lorem ipsum dolor sit amet consectetur adipisicing elit. Nemo
            assumenda placeat eius, explicabo id voluptates quaerat iure amet
            laudantium autem porro expedita a, consequuntur commodi sit
            aperiam in. Maiores, ea!
          </p>
          <a href="#" class="boton boton--primario">Leer Entrada</a>
        </div>
      </article>

      <article class="entrada">
        <div class="entrada__imagen">
          <picture>
            <source loading="lazy" srcset="img/blog3.webp" type="image/webp" />
            <img loading="lazy" src="img/blog3.jpg" alt="imagen blog" />
          </picture>
        </div>

        <div class="entrada__contenido">
          <h4 class="no-margin">Beneficios del Café</h4>
          <p>
            Lorem ipsum dolor sit amet consectetur adipisicing elit. Nemo
            assumenda placeat eius, explicabo id voluptates quaerat iure amet
            laudantium autem porro expedita a, consequuntur commodi sit
            aperiam in. Maiores, ea!
          </p>
          <a href="#" class="boton boton--primario">Leer Entrada</a>
        </div>
      </article>
    </main>

    <aside class="sidebar">
      <h3>Nuestros Cursos y Talleres</h3>

      <ul class="cursos no-padding">
        <li class="widget-curso">
          <h4 class="no-margin">Técnicas de Extracción de Café</h4>
          <p class="widget-curso__label">
            Precio:<span class="widget-curso__info"> Gratis</span>
          </p>
          <p class="widget-curso__label">
            Cupo:<span class="widget-curso__info"> 20</span>
          </p>
          <a href="#" class="boton boton--secundario">Más Información sobre nuestros cursos</a>
        </li>

        <li class="widget-curso">
          <h4 class="no-margin">4 Recetas de Café para Principiantes</h4>
          <p class="widget-curso__label">
            Precio:<span class="widget-curso__info"> Gratis</span>
          </p>
          <p class="widget-curso__label">
            Cupo:<span class="widget-curso__info"> 20</span>
          </p>
          <a href="#" class="boton boton--secundario">Más Información</a>
        </li>
      </ul>
    </aside>
  </div>

  <footer class="footer">
    <div class="contenedor">
      <div class="barra">
        <a href="index.html" class="logo">
          <h1 class="logo__nombre no-margin centrar-texto">
            Blog<span class="logo__bold">DeCafé</span>
          </h1>
        </a>

        <nav class="navegacion">
          <a href="#" class="navegacion__enlace">Nosotros</a>
          <a href="#" class="navegacion__enlace">Cursos</a>
          <a href="#" class="navegacion__enlace">Contacto</a>
        </nav>
      </div>
    </div>
  </footer>

  <script src="js/modernizr.js"></script>
  <script>
    async function updateCounter() {
      try {
        const response = await fetch(
          "https://ect5lggkc7.execute-api.us-east-1.amazonaws.com/DEV", // CAMBIAR A LA URL DE LA API QUE DEVUELVA AWS API GATEWAY
          {
            method: "GET",
            headers: {
              "Content-Type": "application/json",
            },
            cache: "no-store", // Deshabilita la caché
          }
        );

        if (!response.ok) {
          throw new Error("Error al obtener la respuesta de la API");
        }

        const data = await response.json();
        const body = JSON.parse(data.body);
        const visitas = body.visitas || 0;

        document.getElementById("contador").textContent = visitas;
      } catch (error) {
        console.error("Error fetching visit counter:", error);
        document.getElementById("contador").textContent = "N/A";
      }
    }

    updateCounter();
  </script>
</body>

</html>